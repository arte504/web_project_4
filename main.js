!function(){"use strict";const e=new class{constructor(e,t){this.baseUrl=e,this.headers=t}getInitialCards(){return t(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return t(`${this._baseUrl}/users/me`,{headers:this._headers})}setUserAvatar(e){return t(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})})}sendNewData(e){return t(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,job:e.job})})}createNewCard(e){return t(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}removeCard(e){return t(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return t(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers})}removeLike(e){return t(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers})}}("https://around.nomoreparties.co/v1/group-12",{authorization:"709a0d9d-db06-4890-a594-b07e7309a353","Content-Type":"application/json"});console.log(e);const t=(e,t)=>fetch(e,t).then((e=>{if(e.ok)return e.json();Promise.reject(`ERROR: ${e.statusText}`)}));class s{constructor({cardData:e,user:t,onCardClick:s,removeHandler:r,likeHandler:i},n){this._name=e.name,this._link=e.link,this._cardId=e._id,this._ownerId=e.owner._id,this._userID=t,this._likes=e.likes,this._cardSelector=n,this._onCardClick=s,this._likeHandler=i,this._removeHandler=r}_getTemplate(){return document.querySelector("#card__template").content.querySelector(".card").cloneNode(!0)}deleteCard(){this._item.remove(),this._item=null}_renderLikes(){this.isLiked()?this._item.querySelector(".card__like-button").classList.add("card__like-button_active"):this._item.querySelector(".card__like-button").classList.remove("card__like-button_active"),this._item.querySelector(".card__like-counter").textContent=this._likes.length}isLiked(){return this._likes.some((e=>e._id===this._userId))}updateLikes(e){this._likes=e,this._renderLikes()}_setEventListeners(){this._item.querySelector(".card__like-button").addEventListener("click",(e=>{this._likeCard(e)})),this._item.querySelector(".card__delete-button").addEventListener("click",(()=>{this._removeHandler(this._cardId)})),this._cardImage.addEventListener("click",(e=>{this._onCardClick(e)}))}generateCard(){return this._item=this._getTemplate(),this._ownerId!==this._userId&&this._element.querySelector(".card__delete-button").classList.add("card__delete-button_hidden"),this._cardImage=this._item.querySelector(".card__image"),this._item.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=`Image of  ${this._name} `,this._renderLikes(),this._setEventListeners(),this._item}}class r{constructor(e,t){this._formConfig=e,this._formElement=t}_showInputError=(e,t)=>{const{inputErrorClass:s,errorMessageClass:r}=this._formConfig,i=this._formElement.querySelector(` #${e.id}_error `);i.textContent=t,i.classList.add(r),e.classList.add(s)};_hideInputError=e=>{const{inputErrorClass:t,errorMessageClass:s}=this._formConfig,r=this._formElement.querySelector(` #${e.id}_error `);r.textContent="",r.classList.remove(s),e.classList.remove(t)};resetValidation(){this.inputs.forEach((e=>{this._hideInputError(e)})),this._toggleSubmitButton()}_checkInput=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_checkIfFormValid=()=>this.inputs.every((e=>e.validity.valid));_toggleSubmitButton(){const{inactiveButtonClass:e,submitButtonSelector:t}=this._formConfig,s=this._formElement.querySelector(t);this._checkIfFormValid()?(s.disabled=!1,s.classList.remove(e)):(s.disabled=!0,s.classList.add(e))}_setEventListeners=()=>{const{inputSelector:e}=this._formConfig;return this.inputs=Array.from(this._formElement.querySelectorAll(e)),this.inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInput(e),this._toggleSubmitButton()}))})),this._formElement};enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const i=document.querySelector(".profile__edit-button"),n=document.forms.profile,o=(n.elements.name,n.elements.job,document.querySelector(".modal__close-button_type_edit"),document.querySelector(".modal_type_avatar")),a=(document.querySelector(".modal__input_type_avatar"),document.querySelector(".modal__close-button_type_avatar"),document.querySelector(".profile__add-button")),l=document.querySelector(".modal_type_add-card"),d=(document.querySelector(".modal__input_type_name"),document.querySelector(".modal__input_type_link"),document.querySelector(".modal__close-button_type_add-card"),document.forms.add),c=(d.elements.title,d.elements.link,document.querySelector(".modal__submit-button"),document.querySelector(".cards__grid"),document.querySelector(".modal_type_big-image"),document.querySelector(".modal__big-image"),document.querySelector(".modal__image-caption"),document.querySelector(".modal__close-button_type_big-image"),{formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_error",errorMessageClass:"modal__error_visible"});class _{constructor(e){this._modalElement=document.querySelector(e)}_checkForEscClose=e=>{"Escape"===e.key&&this.close()};open=()=>{this._modalElement.classList.add("modal_visible"),document.addEventListener("keyup",this._checkForEscClose)};close=()=>{this._modalElement.classList.remove("modal_visible"),document.removeEventListener("keyup",this._checkForEscClose)};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(e=>{this.close(e)})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_visible")&&this.close(e)}))}}class m extends _{constructor(e,t){super(e),this._handleSubmitBtn=t,this._formElement=this._modalElement.querySelector(".modal__container")}getInputValues(){const e=Array.from(this._formElement.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setInputValues(e){Array.from(this._formElement.querySelectorAll(".modal__input")).forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(()=>{this._handleSubmitBtn(this.getInputValues()),this.close(),this._formElement.reset()}))}close(){super.close(),this._formElement.reset()}}class u extends _{constructor(e,t){super(e),this._form=document.querySelector(this._selector),this._handleSubmit=t,this._handleSubmitHandler=this._handleSubmitHandler.bind(this)}_handleSubmitHandler(e){e.preventDefault(),this._handleSubmit(),super.close()}_setEventListeners(){super._setEventListeners(),this._form.addEventListener("submit",this._handleSubmitHandler)}_removeEventListeners(){super._removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmitHandler)}}const h=new class extends _{openup=e=>{const t=e.target;this._modalElement.querySelector(".modal__big-image").src=t.src,this._modalElement.querySelector(".modal__big-image").alt=t.alt,this._modalElement.querySelector(".modal__image-caption").textContent=t.alt,this.open()}}(".modal_type_big-image");new m(".modal_type_delete-card").setEventListeners();const p=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._items.forEach((e=>{this._renderer(e)}))}}((t=>{p.addItem(function(t){const r=new s({data:t,user:S,cardSelector:".cards__grid",handleCardClick:e=>{e.preventDefault();const t=e.target,s=t.src,r=t.alt;h.open(s,r),h.setEventListeners()},handleDeleteCard:t=>{u.open(),u.setAction((()=>e.deleteCard(t).then((e=>{r.deleteCard(),u.close()})).catch((e=>console.log(e)))))},handleLikes:t=>{r.isLiked()?e.removeLike(t).then((e=>{r.updateLikes(e.likes)})).catch((e=>console.log(e))):e.addLike(t).then((e=>{r.updateLikes(e.likes)})).catch((e=>console.log(e)))}});return r.generateCard()}(t))}),".cards__grid"),b=new class{constructor({name:e,job:t,avatar:s}){this._name=document.querySelector(`${e}`),this._job=document.querySelector(`${t}`),this._avatar=document.querySelector(`${s}`),this.setUserInfo=this.setUserInfo.bind(this)}getUserInfo(){const e={};return e.userName=this._name.textContent,e.userJob=this._job.textContent,e}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.job}setUserAvatar({avatar:e}){this._avatar.style.backgroundImage=`url('${e}')`}}({name:".profile__title",about:".profile__subtitle",avatar:".profile__image"});e.getUserInfo().then((e=>{b.setUserInfo(e),S=e._id,b.setUserAvatar(e.avatar)})).catch((e=>console.log(e))),e.getInitialCards().then((e=>{p.renderItems(e)})).catch((e=>console.log(e)));const v=new m(".modal_type_edit",(()=>{b.setUserInfo(v.getInputValues()),v.close()}));v.setEventListeners(),i.addEventListener("click",(()=>{v.setInputValues(b.getUserInfo()),y.resetValidation(),v.open()}));const E=new m(".modal_type_add-card",(()=>{const e=E.getInputValues();p.addItem(generateCard(e)),E.close()}));E.setEventListeners(),a.addEventListener("click",(()=>{g.resetValidation(),E.open()}));const y=new r(c,n);y.enableValidation(),new r(c,o).enableValidation();const g=new r(c,l);let S;g.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9DLEdBQVEzSixRQUFRQyxJQUFJMEosS0FJOUJ4TCxFQUFJSyxrQkFBa0I0QixNQUFNQyxJQUMxQmtJLEVBQWFZLFlBQVk5SSxNQUUxQnFKLE9BQU9DLEdBQVEzSixRQUFRQyxJQUFJMEosS0FLNUIsTUFBTWEsRUFBa0IsSUFBSXZELEVBQWMsb0JBQW9CLEtBQzVENkMsRUFBZUcsWUFBWU8sRUFBZ0JuRCxrQkFDM0NtRCxFQUFnQjdELFdBSWxCNkQsRUFBZ0IxRCxvQkFHaEJsQixFQUFXMUMsaUJBQWlCLFNBQVMsS0FDbkNzSCxFQUFnQi9DLGVBQWVxQyxFQUFlbEwsZUFDOUM2TCxFQUFzQmxHLGtCQUN0QmlHLEVBQWdCNUQsVUFLbEIsTUFBTVQsRUFBYyxJQUFJYyxFQUFjLHdCQUF3QixLQUM1RCxNQUFNeUQsRUFBVXZFLEVBQVlrQixpQkFDNUJrQixFQUFhTyxRQUFReEYsYUFBYW9ILElBQ2xDdkUsRUFBWVEsV0FJZFIsRUFBWVcsb0JBR1piLEVBQWMvQyxpQkFBaUIsU0FBUyxLQUN0Q3lILEVBQXNCcEcsa0JBQ3RCNEIsRUFBWVMsVUFLZCxNQUFNNkQsRUFBd0IsSUFBSS9HLEVBQWNDLEVBQVlrQyxHQUM1RDRFLEVBQXNCL0UsbUJBR08sSUFBSWhDLEVBQWNDLEVBQVlvQyxHQUN0Q0wsbUJBR3JCLE1BQU1pRixFQUF3QixJQUFJakgsRUFBY0MsRUFBWXVDLEdBSTVELElBQUltRCxFQUhKc0IsRUFBc0JqRixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL01vZGFsRGVsZXRlQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvSW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGhlYWRlcnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gKysrKysgRmV0Y2hpbmcgKysrKysgLy9cclxuICAvLyAtLS0gRmV0Y2ggSW5pdGlhbENhcmRzIGZyb20gdGhlIHNlcnZlciAtLS0gLy9cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gRmV0Y2ggVXNlckluZm8gZnJvbSB0aGUgc2VydmVyIC0tLSAvL1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZpcnN0Q2FsbChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gKysrKysgQWRkaW5nL0VkaXRpbmcvUmVtb3ZpbmcgZGF0YSArKysrKyAvL1xyXG4gIC8vID09PT09IFByb2ZpbGUgPT09PT0gLy9cclxuICAvLyAtLS0gU2V0L1VwZGF0ZSB1c2VyIGF2YXRhciAtLS0gLy9cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmaXJzdENhbGwoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5saW5rLFxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gU2V0L1VwZGF0ZSB1c2VyIGluZm8gLS0tIC8vXHJcbiAgc2VuZE5ld0RhdGEocHJvZmlsZSkge1xyXG4gICAgcmV0dXJuIGZpcnN0Q2FsbChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXHJcbiAgICAgICAgam9iOiBwcm9maWxlLmpvYixcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vID09PT09IENhcmRzID09PT09IC8vXHJcbiAgLy8gLS0tIENyZWF0aW5nIGEgbmV3IGNhcmQgLS0tIC8vXHJcbiAgY3JlYXRlTmV3Q2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBSZW1vdmluZy9EZWxldGluZyBjYXJkIC0tLSAvL1xyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gQWRkIGxpa2UgdG8gYSBjYXJkIC0tLSAvL1xyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gUmVtb3ZlIGxpa2UgZnJvbSBhIGNhcmQgLS0tIC8vXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmaXJzdENhbGwoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaShcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIiwge1xyXG4gIGF1dGhvcml6YXRpb246IFwiNzA5YTBkOWQtZGIwNi00ODkwLWE1OTQtYjA3ZTczMDlhMzUzXCIsXHJcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxufSk7XHJcblxyXG5jb25zb2xlLmxvZyhhcGkpO1xyXG5cclxuY29uc3QgZmlyc3RDYWxsID0gKHVybCwgaGVhZGVycykgPT4ge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgaGVhZGVycykudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICBQcm9taXNlLnJlamVjdChgRVJST1I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9KTtcclxuICB9OyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgY2FyZERhdGEsIHVzZXIsIG9uQ2FyZENsaWNrLCByZW1vdmVIYW5kbGVyLCBsaWtlSGFuZGxlciB9LFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJRCA9IHVzZXI7XHJcbiAgICB0aGlzLl9saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX29uQ2FyZENsaWNrID0gb25DYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9saWtlSGFuZGxlciA9IGxpa2VIYW5kbGVyO1xyXG4gICAgdGhpcy5fcmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XHJcbiAgfVxyXG4gIC8vIC0tLSBHZXR0aW5nIHRoZSB0ZW1wbGF0ZSAtLS0gLy9cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fdGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZDtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBDYXJkIGRlbGV0aW5nIG1ldGhvZCAtLS0gLy9cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5faXRlbS5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2l0ZW0gPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2l0ZW1cclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faXRlbVxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tIENoZWNrIGlmIGNhcmQgbGlrZWQgYnkgYW5vdGhlciB1c2VyIC0tLSAvL1xyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgodXNlcikgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gVG9nZ2xlIGxpa2UgYnV0dG9uIG1ldGhvZCAtLS0gLy9cclxuICB1cGRhdGVMaWtlcyhuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gU2V0IGV2ZW50cyBsaXN0ZW5lcnMgZm9yIHRoZSBjYXJkcyB0aGF0IHdpbGwgYmUgY3JlYXRlZCEgLS0tIC8vXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faXRlbVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VDYXJkKGV2ZW50KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5faXRlbVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUhhbmRsZXIodGhpcy5fY2FyZElkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5fb25DYXJkQ2xpY2soZXZlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gQ3JlYXRpbmcgdGhlIGNhcmQgYW5kIGNhcmQgZWxlbWVudHMgLS0tIC8vXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fZGVsZXRlLWJ1dHRvbl9oaWRkZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IFwiSW1hZ2Ugb2YgXCIgKyBgICR7dGhpcy5fbmFtZX0gYDtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5faXRlbTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1Db25maWcgPSBmb3JtQ29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yTWVzc2FnZUNsYXNzIH0gPSB0aGlzLl9mb3JtQ29uZmlnO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgICMke2lucHV0RWxlbWVudC5pZH1fZXJyb3IgYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvck1lc3NhZ2VDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH07XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yTWVzc2FnZUNsYXNzIH0gPSB0aGlzLl9mb3JtQ29uZmlnO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgICMke2lucHV0RWxlbWVudC5pZH1fZXJyb3IgYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JNZXNzYWdlQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrSWZGb3JtVmFsaWQgPSAoKSA9PiB0aGlzLmlucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcywgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgaWYgKHRoaXMuX2NoZWNrSWZGb3JtVmFsaWQoKSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICB0aGlzLmlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudDtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn0iLCIvLyAtLS0gJ0VkaXQgcHJvZmlsZScgbW9kYWwgY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVNb2RhbC5lbGVtZW50cy5uYW1lO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlTW9kYWwuZWxlbWVudHMuam9iO1xyXG5leHBvcnQgY29uc3QgZWRpdENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9lZGl0Jyk7XHJcbi8vIC0tLSAnQXZhdGFyXCIgbW9kYWwgY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfdHlwZV9hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhck1vZGFsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3R5cGVfYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfYXZhdGFyJylcclxuLy8gLS0tICdBZGQtY2FyZCcgbW9kYWwgY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfdHlwZV9hZGQtY2FyZCcpO1xyXG5leHBvcnQgY29uc3QgY2FyZElucHV0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZElucHV0TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfdHlwZV9saW5rJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX2FkZC1jYXJkJyk7XHJcbi8vIC0tLSAnQWRkLUNhcmQnIGZvcm0gY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hZGQ7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybVRpdGVsID0gYWRkQ2FyZEZvcm0uZWxlbWVudHMudGl0bGU7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybUxpbmsgPSBhZGRDYXJkRm9ybS5lbGVtZW50cy5saW5rO1xyXG4vLyAtLS0gR2VuZXJhbCBjb25zdCAtLS0gLy9cclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fc3VibWl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2dyaWQnKTtcclxuLy8gLS0tIEJpZyBpbWFnZSBtb2RhbCBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBjYXJkQmlnTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfdHlwZV9iaWctaW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRCaWdNb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19iaWctaW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRCaWdNb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltYWdlLWNhcHRpb24nKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRCaWdNb2RhbENsb3NlSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfYmlnLWltYWdlJyk7XHJcbi8vIC0tLSBGb3JtIGNvbmZpZyBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBmb3JtQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2NvbnRhaW5lclwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X2Vycm9yXCIsXHJcbiAgZXJyb3JNZXNzYWdlQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIlxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICB9XHJcbiAgLy8gLS0tIENsb3NlIG1vZGFsIG9uIEVTQyBtZXRob2QgLS0tIC8vXHJcbiAgX2NoZWNrRm9yRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyAtLS0gT3BlbiBtb2RhbCBtZXRob2QgLS0tIC8vIFxyXG4gIG9wZW4gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5fY2hlY2tGb3JFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIC8vIC0tLSBDbG9zZSBtb2RhbCBtZXRob2QgLS0tIC8vXHJcbiAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX3Zpc2libGVcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5fY2hlY2tGb3JFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIC0tLSBDbG9zZSBtb2RhbCBvbiBjbG9zZSgnWCcpIGJ1dHRvbiAtLS0gLy9cclxuICAgIHRoaXMuX21vZGFsRWxlbWVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxyXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZShldmVudCk7XHJcbiAgICB9KTtcclxuICAgIC8vIENsb3NlIG1vZGFsIG9uIG92ZXJsYXkob3V0IG9mIHRoZSBtb2RhbCkgY2xpY2sgLS0tIC8vL1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF92aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZShldmVudCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoRm9ybSBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKG1vZGFsU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0QnRuID0gaGFuZGxlU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY29udGFpbmVyXCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO30pO1xyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXModmFsdWVzKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4gICAgKTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge2lucHV0LnZhbHVlID0gdmFsdWVzW2lucHV0Lm5hbWVdO30pXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0QnRuKHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgTW9kYWwgZnJvbSAnLi9Nb2RhbC5qcyc7XHJcbiAgXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yIChzZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyID0gdGhpcy5faGFuZGxlU3VibWl0SGFuZGxlci5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBcclxuICBfaGFuZGxlU3VibWl0SGFuZGxlciAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG4gIFxyXG4gIF9zZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlU3VibWl0SGFuZGxlcik7XHJcbiAgfVxyXG4gIFxyXG4gIF9yZW1vdmVFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlU3VibWl0SGFuZGxlcik7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgYXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9BcGkuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZWRpdEJ1dHRvbixcclxuICBwcm9maWxlTW9kYWwsXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBhZGRDYXJkTW9kYWwsXHJcbiAgYXZhdGFyTW9kYWwsXHJcbiAgZm9ybUNvbmZpZ1xyXG59IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL01vZGFsV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxEZWxldGVDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vIC0tLSBCaWcgaW1hZ2UgbW9kYWwgaW5zdGFuY2UgLS0tIC8vXHJcbmNvbnN0IGJpZ0ltYWdlTW9kYWwgPSBuZXcgTW9kYWxXaXRoSW1hZ2UoXCIubW9kYWxfdHlwZV9iaWctaW1hZ2VcIik7XHJcblxyXG4vLyAtLS0gRGVsZXRlIGNhcmQgbW9kYWwgaW5zdGFuY2UgYW5kIGV2ZW50cyAtLS0gLy9cclxuY29uc3QgZGVsZXRlQ2FyZE1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9kZWxldGUtY2FyZFwiKTtcclxuZGVsZXRlQ2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyArKysrKyBDYXJkIFNlY3Rpb24gKysrKysgLy9cclxuLy8gLS0tIENhcmQgcmVuZGVyIGZ1bmN0aW9uIC0tLSAvL1xyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgZGF0YTogZGF0YSxcclxuICAgIHVzZXI6IHVzZXJJZCxcclxuICAgIGNhcmRTZWxlY3RvcjogXCIuY2FyZHNfX2dyaWRcIixcclxuICAgIGhhbmRsZUNhcmRDbGljazogKGV2dCkgPT4ge1xyXG4gICAgICAvLyAtLS0gT3BlbiBiaWcgaW1hZ2UgbW9kYWwgLS0tIC8vXHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xyXG4gICAgICBjb25zdCBsaW5rID0gdGFyZ2V0LnNyYztcclxuICAgICAgY29uc3QgbmFtZSA9IHRhcmdldC5hbHQ7XHJcbiAgICAgIGJpZ0ltYWdlTW9kYWwub3BlbihsaW5rLCBuYW1lKTtcclxuICAgICAgYmlnSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmQ6IChjYXJkSWQpID0+IHtcclxuICAgICAgTW9kYWxEZWxldGVDb25maXJtYXRpb24ub3BlbigpO1xyXG4gICAgICBNb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5zZXRBY3Rpb24oKCkgPT5cclxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICBNb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICApO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUxpa2VzOiAoY2FyZElkKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlzTGlrZWQgPSBjYXJkLmlzTGlrZWQoKTtcclxuICAgICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfSBcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgYXBpLmFkZExpa2UoY2FyZElkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgLy8gLS0tIENsb25lIGZyb20gdGVtcGxhdGUgLS0tIC8vXHJcbiAgY29uc3QgY2FyZHNJdGVtID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZHNJdGVtO1xyXG59XHJcblxyXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAoaXRlbSkgPT4ge1xyXG4gICAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgfSxcclxuICBcIi5jYXJkc19fZ3JpZFwiXHJcbik7XHJcblxyXG4vLyArKysrKyAnVXNlciBJbmZvJyArKysrKyAvL1xyXG4vLyAtLS0gVXNlckluZm8gaW5zdGFuY2UgLS0tIC8vXHJcbmNvbnN0IHVzZXJJbmZvVmFsdWVzID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGFib3V0OiBcIi5wcm9maWxlX19zdWJ0aXRsZVwiLFxyXG4gIGF2YXRhcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcbi8vIC0tLSBVc2VySW5mbyBpbml0IC0tLSAvL1xyXG5hcGkuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvVmFsdWVzLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICB1c2VySWQgPSByZXMuX2lkO1xyXG4gICAgdXNlckluZm9WYWx1ZXMuc2V0VXNlckF2YXRhcihyZXMuYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuXHJcbi8vICsrKysrIENhcmQgbGlzdCArKysrKyAvL1xyXG4vLyAtLS0gQ2FyZHMgaW5pdCAtLS0gLy9cclxuYXBpLmdldEluaXRpYWxDYXJkcygpLnRoZW4oKHJlcykgPT4ge1xyXG4gIGNhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcyhyZXMpO1xyXG59KVxyXG4uY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcblxyXG4vLyArKysrKyBGb3JtcyArKysrKyAvL1xyXG4vLyA9PT0gJ0VkaXQgcHJvZmlsZScgZm9ybSA9PT0gLy9cclxuLy8gLS0tIEZvcm0gY3JlYXRpb24gbWV0aG9kIC0tLSAvL1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgTW9kYWxXaXRoRm9ybShcIi5tb2RhbF90eXBlX2VkaXRcIiwgKCkgPT4ge1xyXG4gIHVzZXJJbmZvVmFsdWVzLnNldFVzZXJJbmZvKGVkaXRQcm9maWxlRm9ybS5nZXRJbnB1dFZhbHVlcygpKTtcclxuICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG4vLyAtLS0gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgdGhlIGZvcm0gLS0tIC8vXHJcbmVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gLS0tIFNldCB2YWx1ZXMgYW5kIG9wZW4gdGhlIGZvcm0gLS0tIC8vXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBlZGl0UHJvZmlsZUZvcm0uc2V0SW5wdXRWYWx1ZXModXNlckluZm9WYWx1ZXMuZ2V0VXNlckluZm8oKSlcclxuICBwcm9maWxlRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyA9PT0gJ0FkZCBjYXJkJyBmb3JtID09PSAvL1xyXG4vLyAtLS0gRm9ybSBjcmVhdGlvbiBtZXRob2QgLS0tIC8vXHJcbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9hZGQtY2FyZFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IGFkZENhcmRGb3JtLmdldElucHV0VmFsdWVzKCk7XHJcbiAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oZ2VuZXJhdGVDYXJkKG5ld0NhcmQpKTtcclxuICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciAnYWRkIGNhcmQnIG1vZGFsIC0tLSAvL1xyXG5hZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gLS0tIE9wZW4gJ0FkZCBDYXJkJyBmb3JtIC0tLSAvL1xyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyArKysrKyBWYWxpZGF0aW9uICsrKysrIC8vXHJcbi8vIC0tLSAnRWRpdCBwcm9maWxlJyBmb3JtIHZhbGlkYXRpb24gYWRkaW5nIC0tLSAvL1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBwcm9maWxlTW9kYWwpO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gLS0tICdBdmF0YXInIGZvcm0gdmFsaWRhdGlvbiBhZGRpbmcgLS0tIC8vXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgYXZhdGFyTW9kYWwpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAtLS0gJ0FkZCBjYXJkJyBmb3JtIHZhbGlkYXRpb24gYWRkaW5nIC0tLSAvL1xyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBhZGRDYXJkTW9kYWwpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gLS0tIFN0b3JlIHVzZXIgSUQgLS0tIC8vXHJcbmxldCB1c2VySWQ7IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuICAvLyAtLS0gT3BlbiBiaWcgaW1hZ2UgbW9kYWwgbWV0aG9kIC0tLSAvL1xyXG4gIG9wZW51cCA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgYmlnSW1hZ2UgPSBldmVudC50YXJnZXQ7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmlnLWltYWdlXCIpLnNyYyA9IGJpZ0ltYWdlLnNyYztcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19iaWctaW1hZ2VcIikuYWx0ID0gYmlnSW1hZ2UuYWx0O1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIikudGV4dENvbnRlbnQgPSBiaWdJbWFnZS5hbHQ7XHJcblxyXG4gICAgdGhpcy5vcGVuKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIgKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICBcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKCB7bmFtZSwgam9iLCBhdmF0YXJ9ICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7bmFtZX1gKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7am9ifWApO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHthdmF0YXJ9YCk7XHJcbiAgICB0aGlzLnNldFVzZXJJbmZvID0gdGhpcy5zZXRVc2VySW5mby5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHt9O1xyXG4gICAgdXNlckluZm8udXNlck5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xyXG4gICAgdXNlckluZm8udXNlckpvYiA9IHRoaXMuX2pvYi50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5qb2I7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKCB7YXZhdGFyfSApIHtcclxuICAgIHRoaXMuX2F2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke2F2YXRhcn0nKWA7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJhcGkiLCJjb25zdHJ1Y3RvciIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsImdldEluaXRpYWxDYXJkcyIsImZpcnN0Q2FsbCIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJkYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJsaW5rIiwic2VuZE5ld0RhdGEiLCJwcm9maWxlIiwibmFtZSIsImpvYiIsImNyZWF0ZU5ld0NhcmQiLCJjYXJkIiwicmVtb3ZlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiYXV0aG9yaXphdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsIkNhcmQiLCJjYXJkRGF0YSIsInVzZXIiLCJvbkNhcmRDbGljayIsInJlbW92ZUhhbmRsZXIiLCJsaWtlSGFuZGxlciIsImNhcmRTZWxlY3RvciIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySUQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfb25DYXJkQ2xpY2siLCJfbGlrZUhhbmRsZXIiLCJfcmVtb3ZlSGFuZGxlciIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJkZWxldGVDYXJkIiwiX2l0ZW0iLCJyZW1vdmUiLCJfcmVuZGVyTGlrZXMiLCJpc0xpa2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJzb21lIiwiX3VzZXJJZCIsInVwZGF0ZUxpa2VzIiwibmV3TGlrZXMiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJfbGlrZUNhcmQiLCJfY2FyZEltYWdlIiwiZ2VuZXJhdGVDYXJkIiwiX2VsZW1lbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1Db25maWciLCJfZm9ybUVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvck1lc3NhZ2VDbGFzcyIsImVycm9yRWxlbWVudCIsImlkIiwiX2hpZGVJbnB1dEVycm9yIiwicmVzZXRWYWxpZGF0aW9uIiwiaW5wdXRzIiwiZm9yRWFjaCIsImlucHV0IiwiX3RvZ2dsZVN1Ym1pdEJ1dHRvbiIsIl9jaGVja0lucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSWZGb3JtVmFsaWQiLCJldmVyeSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImJ1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsImlucHV0U2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZWRpdEJ1dHRvbiIsInByb2ZpbGVNb2RhbCIsImZvcm1zIiwiYXZhdGFyTW9kYWwiLCJlbGVtZW50cyIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybSIsInRpdGxlIiwiZm9ybVNlbGVjdG9yIiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9jaGVja0ZvckVzY0Nsb3NlIiwia2V5IiwiY2xvc2UiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJNb2RhbFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0QnRuIiwiZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJyZXNldCIsIk1vZGFsRGVsZXRlQ29uZmlybWF0aW9uIiwic2VsZWN0b3IiLCJfZm9ybSIsIl9zZWxlY3RvciIsIl9oYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0SGFuZGxlciIsImJpbmQiLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJiaWdJbWFnZU1vZGFsIiwib3BlbnVwIiwiYmlnSW1hZ2UiLCJjYXJkc1NlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJldnQiLCJoYW5kbGVEZWxldGVDYXJkIiwic2V0QWN0aW9uIiwiY2F0Y2giLCJlcnIiLCJoYW5kbGVMaWtlcyIsImNyZWF0ZUNhcmQiLCJ1c2VySW5mb1ZhbHVlcyIsIl9qb2IiLCJfYXZhdGFyIiwic2V0VXNlckluZm8iLCJ1c2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYWJvdXQiLCJlZGl0UHJvZmlsZUZvcm0iLCJwcm9maWxlRm9ybVZhbGlkYXRpb24iLCJuZXdDYXJkIiwiYWRkQ2FyZEZvcm1WYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==