!function(){"use strict";var e={};(function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);class t{constructor({cardData:e,user:t,onCardClick:s,removeHandler:r,likeHandler:n},o){this._name=e.name,this._link=e.link,this._cardId=e._id,this._ownerId=e.owner._id,this._userID=t,this._likes=e.likes,this._cardSelector=o,this._onCardClick=s,this._likeHandler=n,this._removeHandler=r}_getTemplate(){return document.querySelector("#card__template").content.querySelector(".card").cloneNode(!0)}deleteCard(){this._item.remove(),this._item=null}_renderLikes(){this.isLiked()?this._item.querySelector(".card__like-button").classList.add("card__like-button_active"):this._item.querySelector(".card__like-button").classList.remove("card__like-button_active"),this._item.querySelector(".card__like-counter").textContent=this._likes.length}isLiked(){return this._likes.some((e=>e._id===this._userId))}updateLikes(e){this._likes=e,this._renderLikes()}_setEventListeners(){this._item.querySelector(".card__like-button").addEventListener("click",(e=>{this._likeCard(e)})),this._item.querySelector(".card__delete-button").addEventListener("click",(()=>{this._removeHandler(this._cardId)})),this._cardImage.addEventListener("click",(e=>{this._onCardClick(e)}))}generateCard(){return this._item=this._getTemplate(),this._ownerId!==this._userId&&this._element.querySelector(".card__delete-button").classList.add("card__delete-button_hidden"),this._cardImage=this._item.querySelector(".card__image"),this._item.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=`Image of  ${this._name} `,this._renderLikes(),this._setEventListeners(),this._item}}class s{constructor(e,t){this._formConfig=e,this._formElement=t}_showInputError=(e,t)=>{const{inputErrorClass:s,errorMessageClass:r}=this._formConfig,n=this._formElement.querySelector(` #${e.id}_error `);n.textContent=t,n.classList.add(r),e.classList.add(s)};_hideInputError=e=>{const{inputErrorClass:t,errorMessageClass:s}=this._formConfig,r=this._formElement.querySelector(` #${e.id}_error `);r.textContent="",r.classList.remove(s),e.classList.remove(t)};resetValidation(){this.inputs.forEach((e=>{this._hideInputError(e)})),this._toggleSubmitButton()}_checkInput=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_checkIfFormValid=()=>this.inputs.every((e=>e.validity.valid));_toggleSubmitButton(){const{inactiveButtonClass:e,submitButtonSelector:t}=this._formConfig,s=this._formElement.querySelector(t);this._checkIfFormValid()?(s.disabled=!1,s.classList.remove(e)):(s.disabled=!0,s.classList.add(e))}_setEventListeners=()=>{const{inputSelector:e}=this._formConfig;return this.inputs=Array.from(this._formElement.querySelectorAll(e)),this.inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInput(e),this._toggleSubmitButton()}))})),this._formElement};enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const r=document.querySelector(".profile__edit-button"),n=document.forms.profile,o=(n.elements.name,n.elements.job,document.querySelector(".modal__close-button_type_edit"),document.querySelector(".profile__image-edit")),i=document.querySelector(".modal_type_avatar"),a=(document.querySelector(".modal__input_type_avatar"),document.querySelector(".modal__close-button_type_avatar"),document.querySelector(".profile__add-button")),l=document.querySelector(".modal_type_add-card"),d=(document.querySelector(".modal__input_type_name"),document.querySelector(".modal__input_type_link"),document.querySelector(".modal__close-button_type_add-card"),document.forms.add),c=(d.elements.title,d.elements.link,document.querySelector(".modal__submit-button"),document.querySelector(".cards__grid"),document.querySelector(".modal_type_big-image"),document.querySelector(".modal__big-image"),document.querySelector(".modal__image-caption"),document.querySelector(".modal__close-button_type_big-image"),{formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_error",errorMessageClass:"modal__error_visible"});class _{constructor(e){this._modalElement=document.querySelector(e)}_checkForEscClose=e=>{"Escape"===e.key&&this.close()};open=()=>{this._modalElement.classList.add("modal_visible"),document.addEventListener("keyup",this._checkForEscClose)};close=()=>{this._modalElement.classList.remove("modal_visible"),document.removeEventListener("keyup",this._checkForEscClose)};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(e=>{this.close(e)})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_visible")&&this.close(e)}))}}class m extends _{constructor(e,t){super(e),this._handleSubmitBtn=t,this._formElement=this._modalElement.querySelector(".modal__container")}getInputValues(){const e=Array.from(this._formElement.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setInputValues(e){Array.from(this._formElement.querySelectorAll(".modal__input")).forEach((t=>{t.value=e[t.name]}))}saving(e){this._formElement.querySelector(".modal__submit-button").textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(()=>{this._handleSubmitBtn(this.getInputValues()),this.close()}))}close(){super.close(),this._formElement.reset()}}class u extends _{constructor(e,t){super(e),this._form=document.querySelector(this._selector),this._handleSubmit=t,this._handleSubmitHandler=this._handleSubmitHandler.bind(this)}_handleSubmitHandler(e){e.preventDefault(),this._handleSubmit(),super.close()}_setEventListeners(){super._setEventListeners(),this._form.addEventListener("submit",this._handleSubmitHandler)}_removeEventListeners(){super._removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmitHandler)}}const h=new e.default({baseUrl:"https://around.nomoreparties.co/v1/group-2",headers:{authorization:"709a0d9d-db06-4890-a594-b07e7309a353","Content-Type":"application/json"}}),p=new class extends _{openup=e=>{const t=e.target;this._modalElement.querySelector(".modal__big-image").src=t.src,this._modalElement.querySelector(".modal__big-image").alt=t.alt,this._modalElement.querySelector(".modal__image-caption").textContent=t.alt,this.open()}}(".modal_type_big-image");new m(".modal_type_delete-card").setEventListeners();const v=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._items.forEach((e=>{this._renderer(e)}))}}((e=>{v.addItem(function(e){const s=new t({data:e,user:L,cardSelector:".cards__grid",handleCardClick:e=>{e.preventDefault();const t=e.target,s=t.src,r=t.alt;p.open(s,r),p.setEventListeners()},handleDeleteCard:e=>{u.open(),u.setAction((()=>h.deleteCard(e).then((e=>{s.deleteCard(),u.close()})).catch((e=>console.log(e)))))},handleLikes:e=>{s.isLiked()?h.removeLike(e).then((e=>{s.updateLikes(e.likes)})).catch((e=>console.log(e))):h.addLike(e).then((e=>{s.updateLikes(e.likes)})).catch((e=>console.log(e)))}});return s.generateCard()}(e))}),".cards__grid"),b=new class{constructor({name:e,job:t,avatar:s}){this._name=document.querySelector(`${e}`),this._job=document.querySelector(`${t}`),this._avatar=document.querySelector(`${s}`),this.setUserInfo=this.setUserInfo.bind(this)}getUserInfo(){const e={};return e.userName=this._name.textContent,e.userJob=this._job.textContent,e}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.job}setUserAvatar({avatar:e}){this._avatar.style.backgroundImage=`url('${e}')`}}({name:".profile__title",about:".profile__subtitle",avatar:".profile__image"});h.getUserInfo().then((e=>{b.setUserInfo(e),L=e._id,b.setUserAvatar(e.avatar)})).catch((e=>console.log(e))),h.getInitialCards().then((e=>{v.renderItems(e)})).catch((e=>console.log(e)));const y=new m(".modal_type_edit",(()=>{b.setUserInfo(y.getInputValues()),y.close()}));y.setEventListeners(),r.addEventListener("click",(()=>{y.setInputValues(b.getUserInfo()),E.resetValidation(),y.open()}));const g=new m(".modal_type_avatar",(()=>{const e=g.getInputValues();setUserAvatar(e),g.close()}));g.setEventListeners(),o.addEventListener("click",(()=>{f.resetValidation(),g.open()}));const S=new m(".modal_type_add-card",(()=>{const e=S.getInputValues();v.addItem(generateCard(e)),S.close()}));S.setEventListeners(),a.addEventListener("click",(()=>{k.resetValidation(),S.open()}));const E=new s(c,n);E.enableValidation();const f=new s(c,i);f.enableValidation();const k=new s(c,l);let L;k.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL01vZGFsLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL01vZGFsV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxEZWxldGVDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9JbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgY2FyZERhdGEsIHVzZXIsIG9uQ2FyZENsaWNrLCByZW1vdmVIYW5kbGVyLCBsaWtlSGFuZGxlciB9LFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZElkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJRCA9IHVzZXI7XHJcbiAgICB0aGlzLl9saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cclxuICAgIHRoaXMuX29uQ2FyZENsaWNrID0gb25DYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9saWtlSGFuZGxlciA9IGxpa2VIYW5kbGVyO1xyXG4gICAgdGhpcy5fcmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XHJcbiAgfVxyXG4gIC8vIC0tLSBHZXR0aW5nIHRoZSB0ZW1wbGF0ZSAtLS0gLy9cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fdGVtcGxhdGVcIilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZDtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBDYXJkIGRlbGV0aW5nIG1ldGhvZCAtLS0gLy9cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5faXRlbS5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2l0ZW0gPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2l0ZW1cclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faXRlbVxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID1cclxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tIENoZWNrIGlmIGNhcmQgbGlrZWQgYnkgYW5vdGhlciB1c2VyIC0tLSAvL1xyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgodXNlcikgPT4gdXNlci5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gVG9nZ2xlIGxpa2UgYnV0dG9uIG1ldGhvZCAtLS0gLy9cclxuICB1cGRhdGVMaWtlcyhuZXdMaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gU2V0IGV2ZW50cyBsaXN0ZW5lcnMgZm9yIHRoZSBjYXJkcyB0aGF0IHdpbGwgYmUgY3JlYXRlZCEgLS0tIC8vXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faXRlbVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VDYXJkKGV2ZW50KTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5faXRlbVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUhhbmRsZXIodGhpcy5fY2FyZElkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5fb25DYXJkQ2xpY2soZXZlbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gQ3JlYXRpbmcgdGhlIGNhcmQgYW5kIGNhcmQgZWxlbWVudHMgLS0tIC8vXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fZGVsZXRlLWJ1dHRvbl9oaWRkZW5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IFwiSW1hZ2Ugb2YgXCIgKyBgICR7dGhpcy5fbmFtZX0gYDtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5faXRlbTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1Db25maWcgPSBmb3JtQ29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yTWVzc2FnZUNsYXNzIH0gPSB0aGlzLl9mb3JtQ29uZmlnO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgICMke2lucHV0RWxlbWVudC5pZH1fZXJyb3IgYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvck1lc3NhZ2VDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH07XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yTWVzc2FnZUNsYXNzIH0gPSB0aGlzLl9mb3JtQ29uZmlnO1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgICMke2lucHV0RWxlbWVudC5pZH1fZXJyb3IgYCk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JNZXNzYWdlQ2xhc3MpO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrSWZGb3JtVmFsaWQgPSAoKSA9PiB0aGlzLmlucHV0cy5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcywgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgaWYgKHRoaXMuX2NoZWNrSWZGb3JtVmFsaWQoKSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0U2VsZWN0b3IgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICB0aGlzLmlucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0KGlucHV0KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudDtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn0iLCIvLyAtLS0gJ0VkaXQgcHJvZmlsZScgbW9kYWwgY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IHByb2ZpbGVNb2RhbC5lbGVtZW50cy5uYW1lO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlTW9kYWwuZWxlbWVudHMuam9iO1xyXG5leHBvcnQgY29uc3QgZWRpdENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9lZGl0Jyk7XHJcbi8vIC0tLSAnQXZhdGFyXCIgbW9kYWwgY29uc3RzIC0tLSAvL1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2F2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyTW9kYWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfdHlwZV9hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9hdmF0YXInKVxyXG4vLyAtLS0gJ0FkZC1jYXJkJyBtb2RhbCBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2FkZC1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF90eXBlX2xpbmsnKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfYWRkLWNhcmQnKTtcclxuLy8gLS0tICdBZGQtQ2FyZCcgZm9ybSBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZDtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtVGl0ZWwgPSBhZGRDYXJkRm9ybS5lbGVtZW50cy50aXRsZTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtTGluayA9IGFkZENhcmRGb3JtLmVsZW1lbnRzLmxpbms7XHJcbi8vIC0tLSBHZW5lcmFsIGNvbnN0IC0tLSAvL1xyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19zdWJtaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fZ3JpZCcpO1xyXG4vLyAtLS0gQmlnIGltYWdlIG1vZGFsIGNvbnN0cyAtLS0gLy9cclxuZXhwb3J0IGNvbnN0IGNhcmRCaWdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2JpZy1pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2JpZy1pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1hZ2UtY2FwdGlvbicpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsQ2xvc2VJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9iaWctaW1hZ2UnKTtcclxuLy8gLS0tIEZvcm0gY29uZmlnIGNvbnN0cyAtLS0gLy9cclxuZXhwb3J0IGNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfZXJyb3JcIixcclxuICBlcnJvck1lc3NhZ2VDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xyXG4gIH1cclxuICAvLyAtLS0gQ2xvc2UgbW9kYWwgb24gRVNDIG1ldGhvZCAtLS0gLy9cclxuICBfY2hlY2tGb3JFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIC0tLSBPcGVuIG1vZGFsIG1ldGhvZCAtLS0gLy8gXHJcbiAgb3BlbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9jaGVja0ZvckVzY0Nsb3NlKTtcclxuICB9XHJcbiAgLy8gLS0tIENsb3NlIG1vZGFsIG1ldGhvZCAtLS0gLy9cclxuICBjbG9zZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9jaGVja0ZvckVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gLS0tIENsb3NlIG1vZGFsIG9uIGNsb3NlKCdYJykgYnV0dG9uIC0tLSAvL1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gICAgLy8gQ2xvc2UgbW9kYWwgb24gb3ZlcmxheShvdXQgb2YgdGhlIG1vZGFsKSBjbGljayAtLS0gLy8vXHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX3Zpc2libGVcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRCdG4gPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7fSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyh2YWx1ZXMpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7aW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV07fSlcclxuICB9XHJcblxyXG4gIHNhdmluZyhpc1NhdmluZykge1xyXG4gICAgaWYgKGlzU2F2aW5nKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIlxyXG4gICAgICApLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgIH0gXHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICAgICkudGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRCdG4odGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tICcuL01vZGFsLmpzJztcclxuICBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxEZWxldGVDb25maXJtYXRpb24gZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IgKHNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEhhbmRsZXIgPSB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oYW5kbGVTdWJtaXRIYW5kbGVyIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbiAgXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvQXBpLmpzXCJcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgZWRpdEJ1dHRvbixcclxuICBwcm9maWxlTW9kYWwsXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBhZGRDYXJkTW9kYWwsXHJcbiAgYXZhdGFyTW9kYWwsXHJcbiAgYXZhdGFyRWRpdEJ1dHRvbixcclxuICBmb3JtQ29uZmlnXHJcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL01vZGFsV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxEZWxldGVDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMicsXHJcbiAgaGVhZGVyczogeyBcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCI3MDlhMGQ5ZC1kYjA2LTQ4OTAtYTU5NC1iMDdlNzMwOWEzNTNcIixcclxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyBcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gLS0tIEJpZyBpbWFnZSBtb2RhbCBpbnN0YW5jZSAtLS0gLy9cclxuY29uc3QgYmlnSW1hZ2VNb2RhbCA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX2JpZy1pbWFnZVwiKTtcclxuXHJcbi8vIC0tLSBEZWxldGUgY2FyZCBtb2RhbCBpbnN0YW5jZSBhbmQgZXZlbnRzIC0tLSAvL1xyXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIi5tb2RhbF90eXBlX2RlbGV0ZS1jYXJkXCIpO1xyXG5kZWxldGVDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vICsrKysrIENhcmQgU2VjdGlvbiArKysrKyAvL1xyXG4vLyAtLS0gQ2FyZCByZW5kZXIgZnVuY3Rpb24gLS0tIC8vXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgdXNlcjogdXNlcklkLFxyXG4gICAgY2FyZFNlbGVjdG9yOiBcIi5jYXJkc19fZ3JpZFwiLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoZXZ0KSA9PiB7XHJcbiAgICAgIC8vIC0tLSBPcGVuIGJpZyBpbWFnZSBtb2RhbCAtLS0gLy9cclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcbiAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQuc3JjO1xyXG4gICAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmFsdDtcclxuICAgICAgYmlnSW1hZ2VNb2RhbC5vcGVuKGxpbmssIG5hbWUpO1xyXG4gICAgICBiaWdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZDogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBNb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgIE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uLnNldEFjdGlvbigoKSA9PlxyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgIE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZXM6IChjYXJkSWQpID0+IHtcclxuICAgICAgY29uc3QgaXNMaWtlZCA9IGNhcmQuaXNMaWtlZCgpO1xyXG4gICAgICBpZiAoaXNMaWtlZCkge1xyXG4gICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KTtcclxuICAvLyAtLS0gQ2xvbmUgZnJvbSB0ZW1wbGF0ZSAtLS0gLy9cclxuICBjb25zdCBjYXJkc0l0ZW0gPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkc0l0ZW07XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIChpdGVtKSA9PiB7XHJcbiAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICB9LFxyXG4gIFwiLmNhcmRzX19ncmlkXCJcclxuKTtcclxuXHJcbi8vICsrKysrICdVc2VyIEluZm8nICsrKysrIC8vXHJcbi8vIC0tLSBVc2VySW5mbyBpbnN0YW5jZSAtLS0gLy9cclxuY29uc3QgdXNlckluZm9WYWx1ZXMgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgYWJvdXQ6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuLy8gLS0tIFVzZXJJbmZvIGluaXQgLS0tIC8vXHJcbmFwaS5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm9WYWx1ZXMuc2V0VXNlckluZm8ocmVzKTtcclxuICAgIHVzZXJJZCA9IHJlcy5faWQ7XHJcbiAgICB1c2VySW5mb1ZhbHVlcy5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuLy8gKysrKysgQ2FyZCBsaXN0ICsrKysrIC8vXHJcbi8vIC0tLSBDYXJkcyBpbml0IC0tLSAvL1xyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiB7XHJcbiAgY2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKHJlcyk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuXHJcbi8vICsrKysrIEZvcm1zICsrKysrIC8vXHJcbi8vID09PSAnRWRpdCBwcm9maWxlJyBmb3JtID09PSAvL1xyXG4vLyAtLS0gRm9ybSBjcmVhdGlvbiBtZXRob2QgLS0tIC8vXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IG5ldyBNb2RhbFdpdGhGb3JtKFwiLm1vZGFsX3R5cGVfZWRpdFwiLCAoKSA9PiB7XHJcbiAgdXNlckluZm9WYWx1ZXMuc2V0VXNlckluZm8oZWRpdFByb2ZpbGVGb3JtLmdldElucHV0VmFsdWVzKCkpO1xyXG4gIGVkaXRQcm9maWxlRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgZm9ybSAtLS0gLy9cclxuZWRpdFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyAtLS0gU2V0IHZhbHVlcyBhbmQgb3BlbiB0aGUgZm9ybSAtLS0gLy9cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRQcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mb1ZhbHVlcy5nZXRVc2VySW5mbygpKVxyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UHJvZmlsZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8vID09PSAnQXZhdGFyJyBlZGl0IGZvcm0gPT09IC8vXHJcbmNvbnN0IGF2YXRhckZvcm0gPSBuZXcgTW9kYWxXaXRoRm9ybShcIi5tb2RhbF90eXBlX2F2YXRhclwiLCAoKSA9PiB7XHJcbiAgY29uc3QgbmV3QXZhdGFyID0gYXZhdGFyRm9ybS5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIHNldFVzZXJBdmF0YXIobmV3QXZhdGFyKTtcclxuICBhdmF0YXJGb3JtLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIFNldCBldmVudCBsZXN0ZW5lcnMgdG8gdGhlIGZvcm0gLS0tIC8vXHJcbmF2YXRhckZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhdmF0YXJGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyA9PT0gJ0FkZCBjYXJkJyBmb3JtID09PSAvL1xyXG4vLyAtLS0gRm9ybSBjcmVhdGlvbiBtZXRob2QgLS0tIC8vXHJcbmNvbnN0IGFkZENhcmRGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oXCIubW9kYWxfdHlwZV9hZGQtY2FyZFwiLCAoKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IGFkZENhcmRGb3JtLmdldElucHV0VmFsdWVzKCk7XHJcbiAgY2FyZHNTZWN0aW9uLmFkZEl0ZW0oZ2VuZXJhdGVDYXJkKG5ld0NhcmQpKTtcclxuICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciAnYWRkIGNhcmQnIG1vZGFsIC0tLSAvL1xyXG5hZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gLS0tIE9wZW4gJ0FkZCBDYXJkJyBmb3JtIC0tLSAvL1xyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyArKysrKyBWYWxpZGF0aW9uICsrKysrIC8vXHJcbi8vIC0tLSAnRWRpdCBwcm9maWxlJyBmb3JtIHZhbGlkYXRpb24gYWRkaW5nIC0tLSAvL1xyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBwcm9maWxlTW9kYWwpO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gLS0tICdBdmF0YXInIGZvcm0gdmFsaWRhdGlvbiBhZGRpbmcgLS0tIC8vXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgYXZhdGFyTW9kYWwpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAtLS0gJ0FkZCBjYXJkJyBmb3JtIHZhbGlkYXRpb24gYWRkaW5nIC0tLSAvL1xyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBhZGRDYXJkTW9kYWwpO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gLS0tIFN0b3JlIHVzZXIgSUQgLS0tIC8vXHJcbmxldCB1c2VySWQ7IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuICAvLyAtLS0gT3BlbiBiaWcgaW1hZ2UgbW9kYWwgbWV0aG9kIC0tLSAvL1xyXG4gIG9wZW51cCA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgYmlnSW1hZ2UgPSBldmVudC50YXJnZXQ7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmlnLWltYWdlXCIpLnNyYyA9IGJpZ0ltYWdlLnNyYztcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19iaWctaW1hZ2VcIikuYWx0ID0gYmlnSW1hZ2UuYWx0O1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIikudGV4dENvbnRlbnQgPSBiaWdJbWFnZS5hbHQ7XHJcblxyXG4gICAgdGhpcy5vcGVuKCk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIgKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICBcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoY2FyZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKCB7bmFtZSwgam9iLCBhdmF0YXJ9ICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7bmFtZX1gKTtcclxuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7am9ifWApO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHthdmF0YXJ9YCk7XHJcbiAgICB0aGlzLnNldFVzZXJJbmZvID0gdGhpcy5zZXRVc2VySW5mby5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5mbyA9IHt9O1xyXG4gICAgdXNlckluZm8udXNlck5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xyXG4gICAgdXNlckluZm8udXNlckpvYiA9IHRoaXMuX2pvYi50ZXh0Q29udGVudDtcclxuXHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gZGF0YS5qb2I7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKCB7YXZhdGFyfSApIHtcclxuICAgIHRoaXMuX2F2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke2F2YXRhcn0nKWA7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJleHBvcnRzIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJ1c2VyIiwib25DYXJkQ2xpY2siLCJyZW1vdmVIYW5kbGVyIiwibGlrZUhhbmRsZXIiLCJjYXJkU2VsZWN0b3IiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklEIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX29uQ2FyZENsaWNrIiwiX2xpa2VIYW5kbGVyIiwiX3JlbW92ZUhhbmRsZXIiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZGVsZXRlQ2FyZCIsIl9pdGVtIiwicmVtb3ZlIiwiX3JlbmRlckxpa2VzIiwiaXNMaWtlZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwic29tZSIsIl91c2VySWQiLCJ1cGRhdGVMaWtlcyIsIm5ld0xpa2VzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiX2xpa2VDYXJkIiwiX2NhcmRJbWFnZSIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50Iiwic3JjIiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImZvcm1Db25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtQ29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JNZXNzYWdlQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJpZCIsIl9oaWRlSW5wdXRFcnJvciIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0cyIsImZvckVhY2giLCJpbnB1dCIsIl90b2dnbGVTdWJtaXRCdXR0b24iLCJfY2hlY2tJbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9jaGVja0lmRm9ybVZhbGlkIiwiZXZlcnkiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJpbnB1dFNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImVkaXRCdXR0b24iLCJwcm9maWxlTW9kYWwiLCJmb3JtcyIsInByb2ZpbGUiLCJhdmF0YXJFZGl0QnV0dG9uIiwiZWxlbWVudHMiLCJqb2IiLCJhdmF0YXJNb2RhbCIsImFkZENhcmRCdXR0b24iLCJhZGRDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybSIsInRpdGxlIiwiZm9ybVNlbGVjdG9yIiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsRWxlbWVudCIsIl9jaGVja0ZvckVzY0Nsb3NlIiwia2V5IiwiY2xvc2UiLCJvcGVuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJNb2RhbFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlU3VibWl0QnRuIiwiZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dExpc3QiLCJpbnB1dFZhbHVlcyIsInNldElucHV0VmFsdWVzIiwidmFsdWVzIiwic2F2aW5nIiwiaXNTYXZpbmciLCJyZXNldCIsIk1vZGFsRGVsZXRlQ29uZmlybWF0aW9uIiwic2VsZWN0b3IiLCJfZm9ybSIsIl9zZWxlY3RvciIsIl9oYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0SGFuZGxlciIsImJpbmQiLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJiaWdJbWFnZU1vZGFsIiwib3BlbnVwIiwiYmlnSW1hZ2UiLCJjYXJkc1NlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2xlYXIiLCJpbm5lckhUTUwiLCJyZW5kZXJJdGVtcyIsImNhcmQiLCJpdGVtIiwiZGF0YSIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImV2dCIsImhhbmRsZURlbGV0ZUNhcmQiLCJjYXJkSWQiLCJzZXRBY3Rpb24iLCJ0aGVuIiwicmVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlTGlrZXMiLCJyZW1vdmVMaWtlIiwiYWRkTGlrZSIsImNyZWF0ZUNhcmQiLCJ1c2VySW5mb1ZhbHVlcyIsImF2YXRhciIsIl9qb2IiLCJfYXZhdGFyIiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwic2V0VXNlckF2YXRhciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiYWJvdXQiLCJnZXRJbml0aWFsQ2FyZHMiLCJlZGl0UHJvZmlsZUZvcm0iLCJwcm9maWxlRm9ybVZhbGlkYXRpb24iLCJhdmF0YXJGb3JtIiwibmV3QXZhdGFyIiwiYXZhdGFyRm9ybVZhbGlkYXRpb24iLCJuZXdDYXJkIiwiYWRkQ2FyZEZvcm1WYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==