!function(){"use strict";const e=new class{constructor(e,t){this.baseUrl=e,this.headers=t}getInitialCards(){return t(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return t(`${this._baseUrl}/users/me`,{headers:this._headers})}setUserAvatar(e){return t(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})})}sendNewData(e){return t(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,job:e.job})})}createNewCard(e){return t(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}removeCard(e){return t(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return t(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers})}removeLike(e){return t(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers})}}("https://around.nomoreparties.co/v1/group-12",{authorization:"709a0d9d-db06-4890-a594-b07e7309a353","Content-Type":"application/json"}).then((e=>e.json())).then((e=>{console.log(e)})),t=(e,t)=>fetch(e,t).then((e=>{if(e.ok)return e.json();Promise.reject(`ERROR: ${e.statusText}`)}));class s{constructor({cardData:e,user:t,onCardClick:s,removeHandler:r,likeHandler:i},n){this._name=e.name,this._link=e.link,this._cardId=e._id,this._ownerId=e.owner._id,this._userID=t,this._likes=e.likes,this._cardSelector=n,this._onCardClick=s,this._likeHandler=i,this._removeHandler=r}_getTemplate(){return document.querySelector("#card__template").content.querySelector(".card").cloneNode(!0)}deleteCard(){this._item.remove(),this._item=null}_renderLikes(){this.isLiked()?this._item.querySelector(".card__like-button").classList.add("card__like-button_active"):this._item.querySelector(".card__like-button").classList.remove("card__like-button_active"),this._item.querySelector(".card__like-counter").textContent=this._likes.length}isLiked(){return this._likes.some((e=>e._id===this._userId))}updateLikes(e){this._likes=e,this._renderLikes()}_setEventListeners(){this._item.querySelector(".card__like-button").addEventListener("click",(e=>{this._likeCard(e)})),this._item.querySelector(".card__delete-button").addEventListener("click",(()=>{this._removeHandler(this._cardId)})),this._cardImage.addEventListener("click",(e=>{this._onCardClick(e)}))}generateCard(){return this._item=this._getTemplate(),this._ownerId!==this._userId&&this._element.querySelector(".card__delete-button").classList.add("card__delete-button_hidden"),this._cardImage=this._item.querySelector(".card__image"),this._item.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=`Image of  ${this._name} `,this._renderLikes(),this._setEventListeners(),this._item}}class r{constructor(e,t){this._formConfig=e,this._formElement=t}_showInputError=(e,t)=>{const{inputErrorClass:s,errorMessageClass:r}=this._formConfig,i=this._formElement.querySelector(` #${e.id}_error `);i.textContent=t,i.classList.add(r),e.classList.add(s)};_hideInputError=e=>{const{inputErrorClass:t,errorMessageClass:s}=this._formConfig,r=this._formElement.querySelector(` #${e.id}_error `);r.textContent="",r.classList.remove(s),e.classList.remove(t)};resetValidation(){this.inputs.forEach((e=>{this._hideInputError(e)})),this._toggleSubmitButton()}_checkInput=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_checkIfFormValid=()=>this.inputs.every((e=>e.validity.valid));_toggleSubmitButton(){const{inactiveButtonClass:e,submitButtonSelector:t}=this._formConfig,s=this._formElement.querySelector(t);this._checkIfFormValid()?(s.disabled=!1,s.classList.remove(e)):(s.disabled=!0,s.classList.add(e))}_setEventListeners=()=>{const{inputSelector:e}=this._formConfig;return this.inputs=Array.from(this._formElement.querySelectorAll(e)),this.inputs.forEach((e=>{e.addEventListener("input",(()=>{this._checkInput(e),this._toggleSubmitButton()}))})),this._formElement};enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const i=document.querySelector(".profile__edit-button"),n=document.forms.profile,o=(n.elements.name,n.elements.job,document.querySelector(".modal__close-button_type_edit"),document.querySelector(".modal_type_avatar")),a=(document.querySelector(".modal__input_type_avatar"),document.querySelector(".modal__close-button_type_avatar"),document.querySelector(".profile__add-button")),l=document.querySelector(".modal_type_add-card"),d=(document.querySelector(".modal__input_type_name"),document.querySelector(".modal__input_type_link"),document.querySelector(".modal__close-button_type_add-card"),document.forms.add),c=(d.elements.title,d.elements.link,document.querySelector(".modal__submit-button"),document.querySelector(".cards__grid"),document.querySelector(".modal_type_big-image"),document.querySelector(".modal__big-image"),document.querySelector(".modal__image-caption"),document.querySelector(".modal__close-button_type_big-image"),{formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_error",errorMessageClass:"modal__error_visible"});class _{constructor(e){this._modalElement=document.querySelector(e)}_checkForEscClose=e=>{"Escape"===e.key&&this.close()};open=()=>{this._modalElement.classList.add("modal_visible"),document.addEventListener("keyup",this._checkForEscClose)};close=()=>{this._modalElement.classList.remove("modal_visible"),document.removeEventListener("keyup",this._checkForEscClose)};setEventListeners(){this._modalElement.querySelector(".modal__close-button").addEventListener("click",(e=>{this.close(e)})),this._modalElement.addEventListener("click",(e=>{e.target.classList.contains("modal_visible")&&this.close(e)}))}}class m extends _{constructor(e,t){super(e),this._handleSubmitBtn=t,this._formElement=this._modalElement.querySelector(".modal__container")}getInputValues(){const e=Array.from(this._formElement.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setInputValues(e){Array.from(this._formElement.querySelectorAll(".modal__input")).forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._formElement.addEventListener("submit",(()=>{this._handleSubmitBtn(this.getInputValues()),this.close(),this._formElement.reset()}))}close(){super.close(),this._formElement.reset()}}class u extends _{constructor(e,t){super(e),this._form=document.querySelector(this._selector),this._handleSubmit=t,this._handleSubmitHandler=this._handleSubmitHandler.bind(this)}_handleSubmitHandler(e){e.preventDefault(),this._handleSubmit(),super.close()}_setEventListeners(){super._setEventListeners(),this._form.addEventListener("submit",this._handleSubmitHandler)}_removeEventListeners(){super._removeEventListeners(),this._form.removeEventListener("submit",this._handleSubmitHandler)}}const h=new class extends _{openup=e=>{const t=e.target;this._modalElement.querySelector(".modal__big-image").src=t.src,this._modalElement.querySelector(".modal__big-image").alt=t.alt,this._modalElement.querySelector(".modal__image-caption").textContent=t.alt,this.open()}}(".modal_type_big-image");new m(".modal_type_delete-card").setEventListeners();const p=new class{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}clear(){this._container.innerHTML=""}renderItems(){this.clear(),this._items.forEach((e=>{this._renderer(e)}))}}((t=>{p.addItem(function(t){const r=new s({data:t,user:S,cardSelector:".cards__grid",handleCardClick:e=>{e.preventDefault();const t=e.target,s=t.src,r=t.alt;h.open(s,r),h.setEventListeners()},handleDeleteCard:t=>{u.open(),u.setAction((()=>e.deleteCard(t).then((e=>{r.deleteCard(),u.close()})).catch((e=>console.log(e)))))},handleLikes:t=>{r.isLiked()?e.removeLike(t).then((e=>{r.updateLikes(e.likes)})).catch((e=>console.log(e))):e.addLike(t).then((e=>{r.updateLikes(e.likes)})).catch((e=>console.log(e)))}});return r.generateCard()}(t))}),".cards__grid"),b=new class{constructor({name:e,job:t,avatar:s}){this._name=document.querySelector(`${e}`),this._job=document.querySelector(`${t}`),this._avatar=document.querySelector(`${s}`),this.setUserInfo=this.setUserInfo.bind(this)}getUserInfo(){const e={};return e.userName=this._name.textContent,e.userJob=this._job.textContent,e}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.job}setUserAvatar({avatar:e}){this._avatar.style.backgroundImage=`url('${e}')`}}({name:".profile__title",about:".profile__subtitle",avatar:".profile__image"});e.getUserInfo().then((e=>{b.setUserInfo(e),S=e._id,b.setUserAvatar(e.avatar)})).catch((e=>console.log(e))),e.getInitialCards().then((e=>{p.renderItems(e)})).catch((e=>console.log(e)));const v=new m(".modal_type_edit",(()=>{b.setUserInfo(v.getInputValues()),v.close()}));v.setEventListeners(),i.addEventListener("click",(()=>{v.setInputValues(b.getUserInfo()),y.resetValidation(),v.open()}));const E=new m(".modal_type_add-card",(()=>{const e=E.getInputValues();p.addItem(generateCard(e)),E.close()}));E.setEventListeners(),a.addEventListener("click",(()=>{g.resetValidation(),E.open()}));const y=new r(c,n);y.enableValidation(),new r(c,o).enableValidation();const g=new r(c,l);let S;g.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUksRUFBZWxMLGNBQWNvQixFQUFJZCxXQUVsQ3dLLE9BQU9DLEdBQVF4SixRQUFRQyxJQUFJdUosS0FJOUJ6TCxFQUFJSyxrQkFBa0J3QixNQUFNQyxJQUMxQnVJLEVBQWFZLFlBQVluSixNQUUxQjBKLE9BQU9DLEdBQVF4SixRQUFRQyxJQUFJdUosS0FLNUIsTUFBTWEsRUFBa0IsSUFBSXZELEVBQWMsb0JBQW9CLEtBQzVENkMsRUFBZUcsWUFBWU8sRUFBZ0JuRCxrQkFDM0NtRCxFQUFnQjdELFdBSWxCNkQsRUFBZ0IxRCxvQkFHaEJsQixFQUFXMUMsaUJBQWlCLFNBQVMsS0FDbkNzSCxFQUFnQi9DLGVBQWVxQyxFQUFlbkwsZUFDOUM4TCxFQUFzQmxHLGtCQUN0QmlHLEVBQWdCNUQsVUFLbEIsTUFBTVQsRUFBYyxJQUFJYyxFQUFjLHdCQUF3QixLQUM1RCxNQUFNeUQsRUFBVXZFLEVBQVlrQixpQkFDNUJrQixFQUFhTyxRQUFReEYsYUFBYW9ILElBQ2xDdkUsRUFBWVEsV0FJZFIsRUFBWVcsb0JBR1piLEVBQWMvQyxpQkFBaUIsU0FBUyxLQUN0Q3lILEVBQXNCcEcsa0JBQ3RCNEIsRUFBWVMsVUFLZCxNQUFNNkQsRUFBd0IsSUFBSS9HLEVBQWNDLEVBQVlrQyxHQUM1RDRFLEVBQXNCL0UsbUJBR08sSUFBSWhDLEVBQWNDLEVBQVlvQyxHQUN0Q0wsbUJBR3JCLE1BQU1pRixFQUF3QixJQUFJakgsRUFBY0MsRUFBWXVDLEdBSTVELElBQUltRCxFQUhKc0IsRUFBc0JqRixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9zY3JpcHRzL01vZGFsRGVsZXRlQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvSW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL3NjcmlwdHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvc2NyaXB0cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGhlYWRlcnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8gKysrKysgRmV0Y2hpbmcgKysrKysgLy9cclxuICAvLyAtLS0gRmV0Y2ggSW5pdGlhbENhcmRzIGZyb20gdGhlIHNlcnZlciAtLS0gLy9cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gRmV0Y2ggVXNlckluZm8gZnJvbSB0aGUgc2VydmVyIC0tLSAvL1xyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZpcnN0Q2FsbChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gKysrKysgQWRkaW5nL0VkaXRpbmcvUmVtb3ZpbmcgZGF0YSArKysrKyAvL1xyXG4gIC8vID09PT09IFByb2ZpbGUgPT09PT0gLy9cclxuICAvLyAtLS0gU2V0L1VwZGF0ZSB1c2VyIGF2YXRhciAtLS0gLy9cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmaXJzdENhbGwoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5saW5rLFxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gU2V0L1VwZGF0ZSB1c2VyIGluZm8gLS0tIC8vXHJcbiAgc2VuZE5ld0RhdGEocHJvZmlsZSkge1xyXG4gICAgcmV0dXJuIGZpcnN0Q2FsbChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXHJcbiAgICAgICAgam9iOiBwcm9maWxlLmpvYixcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vID09PT09IENhcmRzID09PT09IC8vXHJcbiAgLy8gLS0tIENyZWF0aW5nIGEgbmV3IGNhcmQgLS0tIC8vXHJcbiAgY3JlYXRlTmV3Q2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBSZW1vdmluZy9EZWxldGluZyBjYXJkIC0tLSAvL1xyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gQWRkIGxpa2UgdG8gYSBjYXJkIC0tLSAvL1xyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmlyc3RDYWxsKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gUmVtb3ZlIGxpa2UgZnJvbSBhIGNhcmQgLS0tIC8vXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmaXJzdENhbGwoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaShcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIiwge1xyXG4gIGF1dGhvcml6YXRpb246IFwiNzA5YTBkOWQtZGIwNi00ODkwLWE1OTQtYjA3ZTczMDlhMzUzXCIsXHJcbiAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJ9KVxyXG4gIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSk7XHJcblxyXG5jb25zdCBmaXJzdENhbGwgPSAodXJsLCBoZWFkZXJzKSA9PiB7XHJcbiAgICByZXR1cm4gZmV0Y2godXJsLCBoZWFkZXJzKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIFByb21pc2UucmVqZWN0KGBFUlJPUjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICAgIH0pO1xyXG4gIH07IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBjYXJkRGF0YSwgdXNlciwgb25DYXJkQ2xpY2ssIHJlbW92ZUhhbmRsZXIsIGxpa2VIYW5kbGVyIH0sXHJcbiAgICBjYXJkU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gY2FyZERhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5fdXNlcklEID0gdXNlcjtcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fb25DYXJkQ2xpY2sgPSBvbkNhcmRDbGljaztcclxuICAgIHRoaXMuX2xpa2VIYW5kbGVyID0gbGlrZUhhbmRsZXI7XHJcbiAgICB0aGlzLl9yZW1vdmVIYW5kbGVyID0gcmVtb3ZlSGFuZGxlcjtcclxuICB9XHJcbiAgLy8gLS0tIEdldHRpbmcgdGhlIHRlbXBsYXRlIC0tLSAvL1xyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkX190ZW1wbGF0ZVwiKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkO1xyXG4gIH1cclxuXHJcbiAgLy8gLS0tIENhcmQgZGVsZXRpbmcgbWV0aG9kIC0tLSAvL1xyXG4gIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9pdGVtLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5faXRlbSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfcmVuZGVyTGlrZXMoKSB7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5faXRlbVxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9pdGVtXHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gQ2hlY2sgaWYgY2FyZCBsaWtlZCBieSBhbm90aGVyIHVzZXIgLS0tIC8vXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBUb2dnbGUgbGlrZSBidXR0b24gbWV0aG9kIC0tLSAvL1xyXG4gIHVwZGF0ZUxpa2VzKG5ld0xpa2VzKSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IG5ld0xpa2VzO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBTZXQgZXZlbnRzIGxpc3RlbmVycyBmb3IgdGhlIGNhcmRzIHRoYXQgd2lsbCBiZSBjcmVhdGVkISAtLS0gLy9cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUNhcmQoZXZlbnQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9pdGVtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlSGFuZGxlcih0aGlzLl9jYXJkSWQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9vbkNhcmRDbGljayhldmVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBDcmVhdGluZyB0aGUgY2FyZCBhbmQgY2FyZCBlbGVtZW50cyAtLS0gLy9cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19kZWxldGUtYnV0dG9uX2hpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gXCJJbWFnZSBvZiBcIiArIGAgJHt0aGlzLl9uYW1lfSBgO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9pdGVtO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtQ29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUNvbmZpZyA9IGZvcm1Db25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JNZXNzYWdlQ2xhc3MgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAgIyR7aW5wdXRFbGVtZW50LmlkfV9lcnJvciBgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yTWVzc2FnZUNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuICBcclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JNZXNzYWdlQ2xhc3MgfSA9IHRoaXMuX2Zvcm1Db25maWc7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAgIyR7aW5wdXRFbGVtZW50LmlkfV9lcnJvciBgKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShlcnJvck1lc3NhZ2VDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dCA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJZkZvcm1WYWxpZCA9ICgpID0+IHRoaXMuaW5wdXRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG5cclxuICBfdG9nZ2xlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgY29uc3QgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzLCBzdWJtaXRCdXR0b25TZWxlY3RvciB9ID0gdGhpcy5fZm9ybUNvbmZpZztcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICBpZiAodGhpcy5fY2hlY2tJZkZvcm1WYWxpZCgpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIGNvbnN0IHsgaW5wdXRTZWxlY3RvciB9ID0gdGhpcy5fZm9ybUNvbmZpZztcclxuICAgIHRoaXMuaW5wdXRzID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpKTtcclxuXHJcbiAgICB0aGlzLmlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXQoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1FbGVtZW50O1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSIsIi8vIC0tLSAnRWRpdCBwcm9maWxlJyBtb2RhbCBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZU1vZGFsLmVsZW1lbnRzLm5hbWU7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVNb2RhbC5lbGVtZW50cy5qb2I7XHJcbmV4cG9ydCBjb25zdCBlZGl0Q2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlLWJ1dHRvbl90eXBlX2VkaXQnKTtcclxuLy8gLS0tICdBdmF0YXJcIiBtb2RhbCBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2F2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyTW9kYWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfdHlwZV9hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9hdmF0YXInKVxyXG4vLyAtLS0gJ0FkZC1jYXJkJyBtb2RhbCBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2FkZC1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW5wdXRMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF90eXBlX2xpbmsnKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UtYnV0dG9uX3R5cGVfYWRkLWNhcmQnKTtcclxuLy8gLS0tICdBZGQtQ2FyZCcgZm9ybSBjb25zdHMgLS0tIC8vXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZDtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtVGl0ZWwgPSBhZGRDYXJkRm9ybS5lbGVtZW50cy50aXRsZTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtTGluayA9IGFkZENhcmRGb3JtLmVsZW1lbnRzLmxpbms7XHJcbi8vIC0tLSBHZW5lcmFsIGNvbnN0IC0tLSAvL1xyXG5leHBvcnQgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19zdWJtaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fZ3JpZCcpO1xyXG4vLyAtLS0gQmlnIGltYWdlIG1vZGFsIGNvbnN0cyAtLS0gLy9cclxuZXhwb3J0IGNvbnN0IGNhcmRCaWdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90eXBlX2JpZy1pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2JpZy1pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1hZ2UtY2FwdGlvbicpO1xyXG5leHBvcnQgY29uc3QgY2FyZEJpZ01vZGFsQ2xvc2VJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9iaWctaW1hZ2UnKTtcclxuLy8gLS0tIEZvcm0gY29uZmlnIGNvbnN0cyAtLS0gLy9cclxuZXhwb3J0IGNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfZXJyb3JcIixcclxuICBlcnJvck1lc3NhZ2VDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xyXG4gIH1cclxuICAvLyAtLS0gQ2xvc2UgbW9kYWwgb24gRVNDIG1ldGhvZCAtLS0gLy9cclxuICBfY2hlY2tGb3JFc2NDbG9zZSA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vIC0tLSBPcGVuIG1vZGFsIG1ldGhvZCAtLS0gLy8gXHJcbiAgb3BlbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9jaGVja0ZvckVzY0Nsb3NlKTtcclxuICB9XHJcbiAgLy8gLS0tIENsb3NlIG1vZGFsIG1ldGhvZCAtLS0gLy9cclxuICBjbG9zZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfdmlzaWJsZVwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9jaGVja0ZvckVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gLS0tIENsb3NlIG1vZGFsIG9uIGNsb3NlKCdYJykgYnV0dG9uIC0tLSAvL1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50XHJcbiAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKGV2ZW50KTtcclxuICAgIH0pO1xyXG4gICAgLy8gQ2xvc2UgbW9kYWwgb24gb3ZlcmxheShvdXQgb2YgdGhlIG1vZGFsKSBjbGljayAtLS0gLy8vXHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX3Zpc2libGVcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRCdG4gPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jb250YWluZXJcIik7XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge2lucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7fSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyh2YWx1ZXMpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXHJcbiAgICApO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7aW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXQubmFtZV07fSlcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRCdG4odGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tICcuL01vZGFsLmpzJztcclxuICBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxEZWxldGVDb25maXJtYXRpb24gZXh0ZW5kcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IgKHNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEhhbmRsZXIgPSB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIFxyXG4gIF9oYW5kbGVTdWJtaXRIYW5kbGVyIChldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbiAgXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbiAgXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcclxuICAgIHN1cGVyLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVTdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBlZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVNb2RhbCxcclxuICBhZGRDYXJkQnV0dG9uLFxyXG4gIGFkZENhcmRNb2RhbCxcclxuICBhdmF0YXJNb2RhbCxcclxuICBmb3JtQ29uZmlnXHJcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9zY3JpcHRzL01vZGFsV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL3NjcmlwdHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxEZWxldGVDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Nb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2NyaXB0cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gLS0tIEJpZyBpbWFnZSBtb2RhbCBpbnN0YW5jZSAtLS0gLy9cclxuY29uc3QgYmlnSW1hZ2VNb2RhbCA9IG5ldyBNb2RhbFdpdGhJbWFnZShcIi5tb2RhbF90eXBlX2JpZy1pbWFnZVwiKTtcclxuXHJcbi8vIC0tLSBEZWxldGUgY2FyZCBtb2RhbCBpbnN0YW5jZSBhbmQgZXZlbnRzIC0tLSAvL1xyXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBuZXcgTW9kYWxXaXRoRm9ybShcIi5tb2RhbF90eXBlX2RlbGV0ZS1jYXJkXCIpO1xyXG5kZWxldGVDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vICsrKysrIENhcmQgU2VjdGlvbiArKysrKyAvL1xyXG4vLyAtLS0gQ2FyZCByZW5kZXIgZnVuY3Rpb24gLS0tIC8vXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgdXNlcjogdXNlcklkLFxyXG4gICAgY2FyZFNlbGVjdG9yOiBcIi5jYXJkc19fZ3JpZFwiLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAoZXZ0KSA9PiB7XHJcbiAgICAgIC8vIC0tLSBPcGVuIGJpZyBpbWFnZSBtb2RhbCAtLS0gLy9cclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQ7XHJcbiAgICAgIGNvbnN0IGxpbmsgPSB0YXJnZXQuc3JjO1xyXG4gICAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmFsdDtcclxuICAgICAgYmlnSW1hZ2VNb2RhbC5vcGVuKGxpbmssIG5hbWUpO1xyXG4gICAgICBiaWdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZDogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBNb2RhbERlbGV0ZUNvbmZpcm1hdGlvbi5vcGVuKCk7XHJcbiAgICAgIE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uLnNldEFjdGlvbigoKSA9PlxyXG4gICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgICAgICAgIE1vZGFsRGVsZXRlQ29uZmlybWF0aW9uLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZXM6IChjYXJkSWQpID0+IHtcclxuICAgICAgY29uc3QgaXNMaWtlZCA9IGNhcmQuaXNMaWtlZCgpO1xyXG4gICAgICBpZiAoaXNMaWtlZCkge1xyXG4gICAgICAgIGFwaS5yZW1vdmVMaWtlKGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBhcGkuYWRkTGlrZShjYXJkSWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfVxyXG4gICAgfSxcclxuICB9KTtcclxuICAvLyAtLS0gQ2xvbmUgZnJvbSB0ZW1wbGF0ZSAtLS0gLy9cclxuICBjb25zdCBjYXJkc0l0ZW0gPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkc0l0ZW07XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIChpdGVtKSA9PiB7XHJcbiAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICB9LFxyXG4gIFwiLmNhcmRzX19ncmlkXCJcclxuKTtcclxuXHJcbi8vICsrKysrICdVc2VyIEluZm8nICsrKysrIC8vXHJcbi8vIC0tLSBVc2VySW5mbyBpbnN0YW5jZSAtLS0gLy9cclxuY29uc3QgdXNlckluZm9WYWx1ZXMgPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgYWJvdXQ6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXHJcbiAgYXZhdGFyOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuLy8gLS0tIFVzZXJJbmZvIGluaXQgLS0tIC8vXHJcbmFwaS5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm9WYWx1ZXMuc2V0VXNlckluZm8ocmVzKTtcclxuICAgIHVzZXJJZCA9IHJlcy5faWQ7XHJcbiAgICB1c2VySW5mb1ZhbHVlcy5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuLy8gKysrKysgQ2FyZCBsaXN0ICsrKysrIC8vXHJcbi8vIC0tLSBDYXJkcyBpbml0IC0tLSAvL1xyXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigocmVzKSA9PiB7XHJcbiAgY2FyZHNTZWN0aW9uLnJlbmRlckl0ZW1zKHJlcyk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuXHJcbi8vICsrKysrIEZvcm1zICsrKysrIC8vXHJcbi8vID09PSAnRWRpdCBwcm9maWxlJyBmb3JtID09PSAvL1xyXG4vLyAtLS0gRm9ybSBjcmVhdGlvbiBtZXRob2QgLS0tIC8vXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IG5ldyBNb2RhbFdpdGhGb3JtKFwiLm1vZGFsX3R5cGVfZWRpdFwiLCAoKSA9PiB7XHJcbiAgdXNlckluZm9WYWx1ZXMuc2V0VXNlckluZm8oZWRpdFByb2ZpbGVGb3JtLmdldElucHV0VmFsdWVzKCkpO1xyXG4gIGVkaXRQcm9maWxlRm9ybS5jbG9zZSgpO1xyXG59KTtcclxuXHJcbi8vIC0tLSBTZXQgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgZm9ybSAtLS0gLy9cclxuZWRpdFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyAtLS0gU2V0IHZhbHVlcyBhbmQgb3BlbiB0aGUgZm9ybSAtLS0gLy9cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRQcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyh1c2VySW5mb1ZhbHVlcy5nZXRVc2VySW5mbygpKVxyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0UHJvZmlsZUZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8vID09PSAnQWRkIGNhcmQnIGZvcm0gPT09IC8vXHJcbi8vIC0tLSBGb3JtIGNyZWF0aW9uIG1ldGhvZCAtLS0gLy9cclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBuZXcgTW9kYWxXaXRoRm9ybShcIi5tb2RhbF90eXBlX2FkZC1jYXJkXCIsICgpID0+IHtcclxuICBjb25zdCBuZXdDYXJkID0gYWRkQ2FyZEZvcm0uZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICBjYXJkc1NlY3Rpb24uYWRkSXRlbShnZW5lcmF0ZUNhcmQobmV3Q2FyZCkpO1xyXG4gIGFkZENhcmRGb3JtLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuLy8gLS0tIFNldCBldmVudCBsaXN0ZW5lcnMgZm9yICdhZGQgY2FyZCcgbW9kYWwgLS0tIC8vXHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyAtLS0gT3BlbiAnQWRkIENhcmQnIGZvcm0gLS0tIC8vXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8vICsrKysrIFZhbGlkYXRpb24gKysrKysgLy9cclxuLy8gLS0tICdFZGl0IHByb2ZpbGUnIGZvcm0gdmFsaWRhdGlvbiBhZGRpbmcgLS0tIC8vXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIHByb2ZpbGVNb2RhbCk7XHJcbnByb2ZpbGVGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAtLS0gJ0F2YXRhcicgZm9ybSB2YWxpZGF0aW9uIGFkZGluZyAtLS0gLy9cclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBhdmF0YXJNb2RhbCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIC0tLSAnQWRkIGNhcmQnIGZvcm0gdmFsaWRhdGlvbiBhZGRpbmcgLS0tIC8vXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGFkZENhcmRNb2RhbCk7XHJcbmFkZENhcmRGb3JtVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAtLS0gU3RvcmUgdXNlciBJRCAtLS0gLy9cclxubGV0IHVzZXJJZDsiLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEltYWdlIGV4dGVuZHMgTW9kYWwge1xyXG4gIC8vIC0tLSBPcGVuIGJpZyBpbWFnZSBtb2RhbCBtZXRob2QgLS0tIC8vXHJcbiAgb3BlbnVwID0gKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCBiaWdJbWFnZSA9IGV2ZW50LnRhcmdldDtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19iaWctaW1hZ2VcIikuc3JjID0gYmlnSW1hZ2Uuc3JjO1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2JpZy1pbWFnZVwiKS5hbHQgPSBiaWdJbWFnZS5hbHQ7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IGJpZ0ltYWdlLmFsdDtcclxuXHJcbiAgICB0aGlzLm9wZW4oKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBjbGVhciAoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIFxyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihjYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoIHtuYW1lLCBqb2IsIGF2YXRhcn0gKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtuYW1lfWApO1xyXG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtqb2J9YCk7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke2F2YXRhcn1gKTtcclxuICAgIHRoaXMuc2V0VXNlckluZm8gPSB0aGlzLnNldFVzZXJJbmZvLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge307XHJcbiAgICB1c2VySW5mby51c2VyTmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XHJcbiAgICB1c2VySW5mby51c2VySm9iID0gdGhpcy5fam9iLnRleHRDb250ZW50O1xyXG5cclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkYXRhLmpvYjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoIHthdmF0YXJ9ICkge1xyXG4gICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7YXZhdGFyfScpYDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImFwaSIsImNvbnN0cnVjdG9yIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGlzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmlyc3RDYWxsIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImxpbmsiLCJzZW5kTmV3RGF0YSIsInByb2ZpbGUiLCJuYW1lIiwiam9iIiwiY3JlYXRlTmV3Q2FyZCIsImNhcmQiLCJyZW1vdmVDYXJkIiwiY2FyZElkIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsImpzb24iLCJyZXN1bHQiLCJjb25zb2xlIiwibG9nIiwidXJsIiwiZmV0Y2giLCJvayIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiQ2FyZCIsImNhcmREYXRhIiwidXNlciIsIm9uQ2FyZENsaWNrIiwicmVtb3ZlSGFuZGxlciIsImxpa2VIYW5kbGVyIiwiY2FyZFNlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJJRCIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9vbkNhcmRDbGljayIsIl9saWtlSGFuZGxlciIsIl9yZW1vdmVIYW5kbGVyIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImRlbGV0ZUNhcmQiLCJfaXRlbSIsInJlbW92ZSIsIl9yZW5kZXJMaWtlcyIsImlzTGlrZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsInNvbWUiLCJfdXNlcklkIiwidXBkYXRlTGlrZXMiLCJuZXdMaWtlcyIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIl9saWtlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtQ29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUNvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yTWVzc2FnZUNsYXNzIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dHMiLCJmb3JFYWNoIiwiaW5wdXQiLCJfdG9nZ2xlU3VibWl0QnV0dG9uIiwiX2NoZWNrSW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJZkZvcm1WYWxpZCIsImV2ZXJ5IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiaW5wdXRTZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJlZGl0QnV0dG9uIiwicHJvZmlsZU1vZGFsIiwiZm9ybXMiLCJhdmF0YXJNb2RhbCIsImVsZW1lbnRzIiwiYWRkQ2FyZEJ1dHRvbiIsImFkZENhcmRNb2RhbCIsImFkZENhcmRGb3JtIiwidGl0bGUiLCJmb3JtU2VsZWN0b3IiLCJNb2RhbCIsIm1vZGFsU2VsZWN0b3IiLCJfbW9kYWxFbGVtZW50IiwiX2NoZWNrRm9yRXNjQ2xvc2UiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIk1vZGFsV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXRCdG4iLCJnZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsInZhbHVlcyIsInJlc2V0IiwiTW9kYWxEZWxldGVDb25maXJtYXRpb24iLCJzZWxlY3RvciIsIl9mb3JtIiwiX3NlbGVjdG9yIiwiX2hhbmRsZVN1Ym1pdCIsIl9oYW5kbGVTdWJtaXRIYW5kbGVyIiwiYmluZCIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsImJpZ0ltYWdlTW9kYWwiLCJvcGVudXAiLCJiaWdJbWFnZSIsImNhcmRzU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJjbGVhciIsImlubmVySFRNTCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImV2dCIsImhhbmRsZURlbGV0ZUNhcmQiLCJzZXRBY3Rpb24iLCJjYXRjaCIsImVyciIsImhhbmRsZUxpa2VzIiwiY3JlYXRlQ2FyZCIsInVzZXJJbmZvVmFsdWVzIiwiX2pvYiIsIl9hdmF0YXIiLCJzZXRVc2VySW5mbyIsInVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VySm9iIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhYm91dCIsImVkaXRQcm9maWxlRm9ybSIsInByb2ZpbGVGb3JtVmFsaWRhdGlvbiIsIm5ld0NhcmQiLCJhZGRDYXJkRm9ybVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9